
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-API Chat - Comprehensive Test Report</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 30px; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin: -30px -30px 30px -30px; }
        .header h1 { margin: 0; font-size: 2.5em; }
        .header p { margin: 10px 0 0 0; opacity: 0.9; }
        
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }
        .summary-card { background: #f8f9fa; border-radius: 8px; padding: 20px; text-align: center; border-left: 4px solid; }
        .summary-card.success { border-left-color: #28a745; }
        .summary-card.failure { border-left-color: #dc3545; }
        .summary-card.warning { border-left-color: #ffc107; }
        .summary-card.info { border-left-color: #17a2b8; }
        
        .summary-card h3 { margin: 0 0 10px 0; font-size: 2em; }
        .summary-card p { margin: 0; color: #666; }
        
        .progress-bar { width: 100%; height: 20px; background: #e9ecef; border-radius: 10px; overflow: hidden; margin: 20px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #28a745, #20c997); transition: width 0.3s ease; }
        
        .section { margin: 40px 0; }
        .section h2 { color: #333; border-bottom: 3px solid #667eea; padding-bottom: 10px; }
        
        .test-suite { margin: 30px 0; padding: 20px; border: 1px solid #dee2e6; border-radius: 8px; }
        .test-suite h3 { margin-top: 0; color: #495057; }
        
        .test-list { list-style: none; padding: 0; }
        .test-item { padding: 10px; margin: 5px 0; border-radius: 5px; border-left: 4px solid; }
        .test-item.passed { background: #d4edda; border-left-color: #28a745; }
        .test-item.failed { background: #f8d7da; border-left-color: #dc3545; }
        .test-item.skipped { background: #fff3cd; border-left-color: #ffc107; }
        .test-item.error { background: #f5c6cb; border-left-color: #dc3545; }
        
        .test-name { font-weight: bold; }
        .test-time { float: right; color: #666; font-size: 0.9em; }
        .test-details { margin-top: 10px; font-size: 0.9em; color: #666; }
        .error-message { background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 5px; font-family: monospace; }
        
        .footer { margin-top: 50px; padding-top: 20px; border-top: 1px solid #dee2e6; text-align: center; color: #666; }
        
        @media (max-width: 768px) {
            .summary-grid { grid-template-columns: 1fr; }
            .container { margin: 10px; padding: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Multi-API Chat Platform</h1>
            <p>Comprehensive Test Report - Generated on 2025-08-10 15:19:36</p>
        </div>
        
        <div class="summary-grid">
            <div class="summary-card info">
                <h3>47</h3>
                <p>Total Tests</p>
            </div>
            <div class="summary-card success">
                <h3>36</h3>
                <p>Passed</p>
            </div>
            <div class="summary-card failure">
                <h3>10</h3>
                <p>Failed</p>
            </div>
            <div class="summary-card warning">
                <h3>1</h3>
                <p>Skipped</p>
            </div>
        </div>
        
        <div class="section">
            <h2>Overall Success Rate</h2>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 76.6%"></div>
            </div>
            <p style="text-align: center; font-size: 1.2em; margin-top: 10px;">
                <strong>76.6%</strong> (36/47 tests passed)
            </p>
        </div>

        <div class="section">
            <h2>Backend Tests (pytest)</h2>
            <div class="test-suite">
                <h3>Summary</h3>
                <p><strong>Total:</strong> 47 tests</p>
                <p><strong>Passed:</strong> 36</p>
                <p><strong>Failed:</strong> 10</p>
                <p><strong>Errors:</strong> 0</p>
                <p><strong>Skipped:</strong> 1</p>
                <p><strong>Duration:</strong> 2.63s</p>
                
                <h4>Test Details</h4>
                <ul class="test-list">

                    <li class="test-item passed">
                        <div class="test-name">test_health_endpoint</div>
                        <div class="test-time">0.048s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_health_endpoint_with_ai_agents</div>
                        <div class="test-time">0.003s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_providers_endpoint_get</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_providers_endpoint_structure_validation</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_update_provider_success</div>
                        <div class="test-time">0.003s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_update_provider_nonexistent</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_update_provider_invalid_data</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_settings_get</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_settings_update</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_settings_partial_update</div>
                        <div class="test-time">0.003s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_chat_success</div>
                        <div class="test-time">0.009s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_chat_with_model_selection</div>
                        <div class="test-time">0.008s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_chat_missing_message</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_chat_disabled_provider</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item failed">
                        <div class="test-name">test_chat_with_fallback</div>
                        <div class="test-time">0.008s</div>
<div class="test-details">Message: assert 400 == 200
 +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code</div><div class="error-message">tests/test_comprehensive_backend.py:428: in test_chat_with_fallback
    assert response.status_code == 200
E   assert 400 == 200
E    +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code...</div></li>
                    <li class="test-item failed">
                        <div class="test-name">test_chat_compare_multiple_providers</div>
                        <div class="test-time">0.012s</div>
<div class="test-details">Message: AssertionError: assert 1 == 2
 +  where 1 = len([{'model': 'gpt-4o', 'provider': 'openai', 'response': 'Test AI response for unit testing', 'response_time': 0.00011396408081054688, ...}])</div><div class="error-message">tests/test_comprehensive_backend.py:448: in test_chat_compare_multiple_providers
    assert len(data) == 2
E   AssertionError: assert 1 == 2
E    +  where 1 = len([{'model': 'gpt-4o', 'provider': 'openai', 'response': 'Test AI response for unit testing', 'response_time': 0.00011396408081054688, ...}])...</div></li>
                    <li class="test-item failed">
                        <div class="test-name">test_test_provider_success</div>
                        <div class="test-time">0.061s</div>
<div class="test-details">Message: assert 400 == 200
 +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code</div><div class="error-message">tests/test_comprehensive_backend.py:464: in test_test_provider_success
    assert response.status_code == 200
E   assert 400 == 200
E    +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code...</div></li>
                    <li class="test-item failed">
                        <div class="test-name">test_test_provider_failure</div>
                        <div class="test-time">0.015s</div>
<div class="test-details">Message: assert 400 == 200
 +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code</div><div class="error-message">tests/test_comprehensive_backend.py:482: in test_test_provider_failure
    assert response.status_code == 200
E   assert 400 == 200
E    +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code...</div></li>
                    <li class="test-item passed">
                        <div class="test-name">test_test_all_providers</div>
                        <div class="test-time">0.048s</div>
</li>
                    <li class="test-item failed">
                        <div class="test-name">test_enhanced_provider_test</div>
                        <div class="test-time">0.013s</div>
<div class="test-details">Message: assert 400 == 200
 +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code</div><div class="error-message">tests/test_comprehensive_backend.py:513: in test_enhanced_provider_test
    assert response.status_code == 200
E   assert 400 == 200
E    +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code...</div></li>
                    <li class="test-item passed">
                        <div class="test-name">test_list_devices</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_add_device_success</div>
                        <div class="test-time">0.012s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_add_device_missing_required_field</div>
                        <div class="test-time">0.004s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_add_device_duplicate_id</div>
                        <div class="test-time">0.008s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_update_device_success</div>
                        <div class="test-time">0.021s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_update_device_nonexistent</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_remove_device_success</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_remove_device_nonexistent</div>
                        <div class="test-time">0.007s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_device_connection_test_success</div>
                        <div class="test-time">0.014s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_device_connection_test_failure</div>
                        <div class="test-time">0.018s</div>
</li>
                    <li class="test-item skipped">
                        <div class="test-name">test_send_device_command_success</div>
                        <div class="test-time">0.001s</div>
<div class="test-details">Message: send_command_to_router function not implemented</div></li>
                    <li class="test-item passed">
                        <div class="test-name">test_send_device_command_missing_command</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_send_device_command_nonexistent_device</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_usage_endpoint_empty</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_usage_tracking</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_usage_multiple_requests_tracking</div>
                        <div class="test-time">0.003s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_ollama_provider_configuration</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_ollama_models_endpoint_success</div>
                        <div class="test-time">0.006s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_ollama_models_endpoint_failure</div>
                        <div class="test-time">0.010s</div>
</li>
                    <li class="test-item passed">
                        <div class="test-name">test_ollama_pull_model_success</div>
                        <div class="test-time">0.010s</div>
</li>
                    <li class="test-item failed">
                        <div class="test-name">test_ai_agents_status_endpoint</div>
                        <div class="test-time">0.003s</div>
<div class="test-details">Message: AssertionError: assert 'ai_available' in {'available': True, 'status': {'agent_status': {'master_agent': {'average_response_time': 0, 'last_activity': None, 'status': 'active', 'tasks_completed_today': 0, ...}, 'performance_metrics': {'average_agents_per_task': 1, 'complexity_distribution': {'complex': 0, 'moderate': 0, 'simple': 0}, 'success_rate': 100}, 'specialized_agents': {'analytics_agent': {'capabilities': ['data_analysis', 'metrics', 'reporting', 'insights'], 'role': 'Analytics Agent', 'status': 'active'}, 'automation_agent': {'capabilities': ['workflow_automation', 'process_optimization', 'scheduling'], 'role': 'Automation Agent', 'status': 'active'}, 'chat_agent': {'capabilities': ['conversation', 'general_queries', 'user_interaction'], 'role': 'Chat Agent', 'status': 'active'}, 'device_agent': {'capabilities': ['device_management', 'iot', 'monitoring', 'configuration'], 'role': 'Device Agent', 'status': 'active'}, ...}, 'system_status': {'demo_mode': True, 'enabled': True, 'total_agents': 6}}, 'enabled': True, 'status': 'active'}}</div><div class="error-message">tests/test_comprehensive_backend.py:822: in test_ai_agents_status_endpoint
    assert "ai_available" in data
E   AssertionError: assert 'ai_available' in {'available': True, 'status': {'agent_status': {'master_agent': {'average_response_time': 0, 'last_activity': None, 'status': 'active', 'tasks_completed_today': 0, ...}, 'performance_metrics': {'average_agents_per_task': 1, 'complexity_distribution': {'complex': 0, 'moderate': 0, 'simple': 0}, 'success_rate': 100}, 'specialized_agents': {'analy...</div></li>
                    <li class="test-item passed">
                        <div class="test-name">test_ai_chat_request</div>
                        <div class="test-time">0.003s</div>
</li>
                    <li class="test-item failed">
                        <div class="test-name">test_ai_analytics_request</div>
                        <div class="test-time">0.003s</div>
<div class="test-details">Message: assert 400 == 200
 +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code</div><div class="error-message">tests/test_comprehensive_backend.py:872: in test_ai_analytics_request
    assert response.status_code == 200
E   assert 400 == 200
E    +  where 400 = <WrapperTestResponse streamed [400 BAD REQUEST]>.status_code...</div></li>
                    <li class="test-item passed">
                        <div class="test-name">test_ai_requests_when_unavailable</div>
                        <div class="test-time">0.002s</div>
</li>
                    <li class="test-item failed">
                        <div class="test-name">test_workflow_create</div>
                        <div class="test-time">0.003s</div>
<div class="test-details">Message: assert 404 == 200
 +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code</div><div class="error-message">tests/test_comprehensive_backend.py:914: in test_workflow_create
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <WrapperTestResponse streamed [404 NOT FOUND]>.status_code...</div></li>
                    <li class="test-item failed">
                        <div class="test-name">test_workflow_execute</div>
                        <div class="test-time">0.004s</div>
<div class="test-details">Message: json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)</div><div class="error-message">tests/test_comprehensive_backend.py:930: in test_workflow_execute
    workflow_id = json.loads(create_response.data)["workflow_id"]
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/json/__init__.py:346: in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/json/decoder.py:337: in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/json/decode...</div></li>
                    <li class="test-item failed">
                        <div class="test-name">test_workflow_status</div>
                        <div class="test-time">0.006s</div>
<div class="test-details">Message: json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)</div><div class="error-message">tests/test_comprehensive_backend.py:949: in test_workflow_status
    workflow_id = json.loads(create_response.data)["workflow_id"]
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/json/__init__.py:346: in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/json/decoder.py:337: in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/json/decoder...</div></li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>Frontend Tests (Puppeteer/Mocha)</h2>
            <div class="test-suite">
                <p style="color: red;">Error: Mocha JSON file not found: test-reports/frontend/mocha-results.json</p>
            </div>
        </div>

        <div class="section">
            <h2>Test Coverage Areas</h2>
            <div class="test-suite">
                <h4>Backend Coverage</h4>
                <ul>
                    <li><strong>API Endpoints:</strong> Health, providers, settings, chat, usage</li>
                    <li><strong>Provider Management:</strong> CRUD operations, testing, configuration</li>
                    <li><strong>Device Management:</strong> Router configuration, SSH commands, status monitoring</li>
                    <li><strong>Chat Functionality:</strong> Message handling, fallback mechanisms, model selection</li>
                    <li><strong>AI Agents Integration:</strong> Workflow orchestration, agent communication</li>
                    <li><strong>Error Handling:</strong> Input validation, exception handling, graceful failures</li>
                </ul>
                
                <h4>Frontend Coverage</h4>
                <ul>
                    <li><strong>Page Loading:</strong> All major pages load correctly and display proper content</li>
                    <li><strong>API Integration:</strong> Frontend communicates correctly with backend APIs</li>
                    <li><strong>Chat Interface:</strong> Message sending, response display, provider selection</li>
                    <li><strong>Settings Management:</strong> Provider configuration, testing connections</li>
                    <li><strong>Responsive Design:</strong> Mobile compatibility and layout adaptation</li>
                    <li><strong>Performance:</strong> Page load times and API response times</li>
                </ul>
            </div>
        </div>
        
        <div class="footer">
            <p>Generated by Multi-API Chat Test Suite</p>
            <p>Report includes both backend (pytest) and frontend (Puppeteer) test results</p>
        </div>
    </div>
</body>
</html>
