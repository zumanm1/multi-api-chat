<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automation - Multi-API Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="progressive-disclosure.css">
    <style>
        :root {
            /* Apple Color Palette */
            --apple-blue: #007AFF;
            --apple-gray: #8E8E93;
            --apple-gray-2: #AEAEB2;
            --apple-gray-3: #C7C7CC;
            --apple-gray-4: #D1D1D6;
            --apple-gray-5: #E5E5EA;
            --apple-gray-6: #F2F2F7;
            --apple-black: #1C1C1E;
            --apple-white: #FFFFFF;
            --apple-green: #34C759;
            --apple-red: #FF3B30;
            --apple-orange: #FF9500;
            --apple-yellow: #FFCC00;
            --apple-purple: #AF52DE;
            --apple-pink: #FF2D92;
            --apple-teal: #5AC8FA;
            --apple-indigo: #5856D6;
            
            /* Provider Colors */
            --openai-color: #10a37f;
            --groq-color: #f55036;
            --cerebras-color: #000000;
            --sambanova-color: #00aeef;
            --anthropic-color: #d9dae8;
            --openrouter-color: #000000;
            --ollama-color: #000000;
            
            /* Apple Design System */
            --border-radius-small: 6px;
            --border-radius-medium: 12px;
            --border-radius-large: 20px;
            --shadow-small: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-large: 0 8px 40px rgba(0, 0, 0, 0.12);
            --blur-background: backdrop-filter: saturate(180%) blur(20px);
            --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-spring: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
            background: var(--apple-gray-6);
            color: var(--apple-black);
            min-height: 100vh;
            line-height: 1.47;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 22px;
        }

        header {
            text-align: center;
            padding: 60px 0 40px;
            background: linear-gradient(135deg, var(--apple-purple) 0%, var(--apple-pink) 100%);
            margin: -22px -22px 40px -22px;
            border-radius: 0 0 var(--border-radius-large) var(--border-radius-large);
            color: var(--apple-white);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: saturate(180%) blur(10px);
            -webkit-backdrop-filter: saturate(180%) blur(10px);
        }

        header h1 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 16px;
            background: linear-gradient(45deg, rgba(255,255,255,1) 0%, rgba(255,255,255,0.8) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
        }

        header p {
            font-size: 1.25rem;
            font-weight: 400;
            opacity: 0.9;
            letter-spacing: -0.01em;
            position: relative;
            z-index: 1;
        }

        nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border: 1px solid var(--apple-gray-5);
            border-radius: var(--border-radius-medium);
            padding: 8px;
            display: flex;
            gap: 4px;
            justify-content: center;
            margin-bottom: 40px;
            box-shadow: var(--shadow-medium);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        nav a {
            text-decoration: none;
            color: var(--apple-black);
            padding: 12px 20px;
            border-radius: var(--border-radius-small);
            font-weight: 500;
            font-size: 15px;
            transition: var(--transition);
            position: relative;
            white-space: nowrap;
        }

        nav a:hover {
            background: var(--apple-gray-5);
            transform: translateY(-1px);
        }

        nav a.active {
            background: var(--apple-blue);
            color: var(--apple-white);
            box-shadow: var(--shadow-small);
        }

        .automation-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 32px;
            margin-bottom: 60px;
        }

        .automation-panel {
            background: var(--apple-white);
            border: 1px solid var(--apple-gray-5);
            border-radius: var(--border-radius-large);
            box-shadow: var(--shadow-large);
            padding: 32px;
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            transition: var(--transition-spring);
            position: relative;
            overflow: hidden;
        }
        
        .automation-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--apple-purple), var(--apple-pink));
            transform: scaleX(0);
            transform-origin: left;
            transition: var(--transition);
        }

        .automation-panel:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-large);
        }
        
        .automation-panel:hover::before {
            transform: scaleX(1);
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--apple-gray-5);
        }
        
        .panel-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--apple-purple), var(--apple-pink));
            border-radius: var(--border-radius-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .panel-header h2 {
            font-size: 28px;
            font-weight: 700;
            color: var(--apple-black);
            letter-spacing: -0.02em;
        }

        .workflow-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 32px;
        }

        .workflow-selection {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .selector-label {
            font-size: 17px;
            font-weight: 600;
            color: var(--apple-black);
            margin-bottom: 12px;
            letter-spacing: -0.01em;
        }

        .router-select {
            width: 100%;
            padding: 16px 20px;
            border: 1px solid var(--apple-gray-4);
            border-radius: var(--border-radius-medium);
            font-size: 16px;
            font-weight: 400;
            background: var(--apple-white);
            color: var(--apple-black);
            transition: var(--transition);
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"%3e%3cpath fill="%23666" d="M2 0L0 2h4zm0 5L0 3h4z"/%3e%3c/svg%3e');
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 12px;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        .router-select:focus {
            outline: none;
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .workflow-card {
            background: var(--apple-gray-6);
            border: 1px solid var(--apple-gray-5);
            border-radius: var(--border-radius-medium);
            padding: 20px;
            cursor: pointer;
            transition: var(--transition-spring);
            position: relative;
            overflow: hidden;
        }
        
        .workflow-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .workflow-card:hover::before {
            left: 100%;
        }

        .workflow-card:hover {
            background: var(--apple-white);
            transform: translateY(-2px) scale(1.02);
            box-shadow: var(--shadow-medium);
        }

        .workflow-card.selected {
            background: var(--apple-purple);
            color: var(--apple-white);
            box-shadow: var(--shadow-medium);
        }
        
        .workflow-card.selected .workflow-title,
        .workflow-card.selected .workflow-description {
            color: var(--apple-white);
        }

        .workflow-icon {
            width: 40px;
            height: 40px;
            background: var(--apple-purple);
            border-radius: var(--border-radius-small);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            margin-bottom: 16px;
            transition: var(--transition);
        }
        
        .workflow-card.selected .workflow-icon {
            background: rgba(255, 255, 255, 0.2);
        }

        .workflow-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--apple-black);
            margin-bottom: 8px;
            letter-spacing: -0.01em;
        }

        .workflow-description {
            font-size: 14px;
            color: var(--apple-gray);
            font-weight: 400;
            line-height: 1.4;
        }

        .steps-panel {
            background: var(--apple-gray-6);
            border: 1px solid var(--apple-gray-5);
            border-radius: var(--border-radius-medium);
            padding: 24px;
        }
        
        .steps-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--apple-black);
            margin-bottom: 20px;
        }

        .workflow-steps {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--apple-white);
            border: 1px solid var(--apple-gray-5);
            border-radius: var(--border-radius-medium);
            transition: var(--transition);
        }
        
        .step-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-small);
        }

        .step-number {
            width: 32px;
            height: 32px;
            background: var(--apple-gray-3);
            color: var(--apple-white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .step-number.active {
            background: var(--apple-orange);
            animation: pulse 2s infinite;
        }
        
        .step-number.completed {
            background: var(--apple-green);
        }
        
        .step-number.failed {
            background: var(--apple-red);
        }

        .step-content {
            flex: 1;
        }
        
        .step-title {
            font-size: 15px;
            font-weight: 500;
            color: var(--apple-black);
            margin-bottom: 2px;
        }
        
        .step-description {
            font-size: 13px;
            color: var(--apple-gray);
        }

        .step-status {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }
        
        .step-status.pending {
            color: var(--apple-gray);
        }
        
        .step-status.in-progress {
            color: var(--apple-orange);
        }
        
        .step-status.completed {
            color: var(--apple-green);
        }
        
        .step-status.failed {
            color: var(--apple-red);
        }
        
        /* Chevron icon styles */
        .step-chevron {
            width: 20px;
            height: 20px;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            color: var(--apple-gray-2);
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            background: var(--apple-gray-6);
            border: 1px solid var(--apple-gray-5);
        }
        
        .step-chevron:hover {
            background: var(--apple-gray-5);
            color: var(--apple-gray);
        }
        
        .step-chevron.expanded {
            transform: rotate(90deg);
            background: var(--apple-blue);
            color: var(--apple-white);
            border-color: var(--apple-blue);
        }
        
        /* Technical details section */
        .step-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            margin-top: 0;
            background: var(--apple-gray-6);
            border-radius: var(--border-radius-small);
            border: 1px solid var(--apple-gray-5);
        }
        
        .step-details.expanded {
            max-height: 500px;
            margin-top: 12px;
        }
        
        .step-details-content {
            padding: 16px;
        }
        
        .detail-section {
            margin-bottom: 16px;
        }
        
        .detail-section:last-child {
            margin-bottom: 0;
        }
        
        .detail-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--apple-black);
            margin-bottom: 6px;
            letter-spacing: -0.01em;
        }
        
        .detail-content {
            font-size: 12px;
            color: var(--apple-gray);
            line-height: 1.4;
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Consolas', monospace;
            background: var(--apple-white);
            border: 1px solid var(--apple-gray-5);
            border-radius: var(--border-radius-small);
            padding: 8px 10px;
            white-space: pre-wrap;
        }
        
        .detail-content.parameters {
            font-family: inherit;
            white-space: normal;
        }
        
        .step-item.expanded {
            background: var(--apple-white);
            border-color: var(--apple-blue);
            box-shadow: 0 2px 12px rgba(0, 122, 255, 0.1);
        }

        .input-section {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--apple-gray-5);
        }
        
        .input-label {
            font-size: 17px;
            font-weight: 600;
            color: var(--apple-black);
            margin-bottom: 12px;
            letter-spacing: -0.01em;
        }

        .natural-language-input {
            width: 100%;
            padding: 16px 20px;
            border: 1px solid var(--apple-gray-4);
            border-radius: var(--border-radius-medium);
            font-size: 16px;
            font-weight: 400;
            background: var(--apple-white);
            color: var(--apple-black);
            transition: var(--transition);
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
            line-height: 1.5;
        }

        .natural-language-input:focus {
            outline: none;
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .natural-language-input::placeholder {
            color: var(--apple-gray-2);
        }

        .execute-button {
            padding: 16px 32px;
            background: var(--apple-purple);
            color: var(--apple-white);
            border: none;
            border-radius: var(--border-radius-medium);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--shadow-small);
            margin-top: 20px;
            align-self: flex-start;
        }

        .execute-button:hover {
            background: var(--apple-pink);
            transform: translateY(-1px);
            box-shadow: var(--shadow-medium);
        }

        .execute-button:active {
            transform: translateY(0);
        }

        .execute-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .output-section {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--apple-gray-5);
            display: none;
        }
        
        .output-section.visible {
            display: block;
        }
        
        .output-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--apple-black);
            margin-bottom: 16px;
        }

        .config-output {
            background: rgba(52, 199, 89, 0.1);
            border: 1px solid rgba(52, 199, 89, 0.2);
            border-radius: var(--border-radius-medium);
            padding: 20px;
            margin-bottom: 20px;
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            overflow-x: auto;
            color: var(--apple-black);
        }

        .results-output {
            background: rgba(0, 122, 255, 0.1);
            border: 1px solid rgba(0, 122, 255, 0.2);
            border-radius: var(--border-radius-medium);
            padding: 20px;
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            overflow-x: auto;
            color: var(--apple-black);
        }
        
        /* Command History Styles */
        .command-history {
            margin-top: 32px;
            background: var(--apple-white);
            border: 1px solid var(--apple-gray-5);
            border-radius: var(--border-radius-medium);
            box-shadow: var(--shadow-small);
            overflow: hidden;
        }
        
        .history-header {
            background: linear-gradient(135deg, var(--apple-purple), var(--apple-pink));
            color: var(--apple-white);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            user-select: none;
            transition: var(--transition);
        }
        
        .history-header:hover {
            background: linear-gradient(135deg, var(--apple-pink), var(--apple-purple));
        }
        
        .history-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            font-weight: 600;
        }
        
        .history-toggle {
            font-size: 18px;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .history-toggle.expanded {
            transform: rotate(180deg);
        }
        
        .history-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .history-content.expanded {
            max-height: 800px;
        }
        
        .history-commands {
            padding: 0;
            margin: 0;
            list-style: none;
        }
        
        .command-entry {
            border-bottom: 1px solid var(--apple-gray-5);
            transition: var(--transition);
        }
        
        .command-entry:last-child {
            border-bottom: none;
        }
        
        .command-entry:hover {
            background: var(--apple-gray-6);
        }
        
        .command-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
            background: var(--apple-white);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .command-info {
            display: flex;
            align-items: center;
            gap: 16px;
            flex: 1;
        }
        
        .command-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .command-status.success {
            background: var(--apple-green);
            box-shadow: 0 0 0 2px rgba(52, 199, 89, 0.2);
        }
        
        .command-status.error {
            background: var(--apple-red);
            box-shadow: 0 0 0 2px rgba(255, 59, 48, 0.2);
        }
        
        .command-status.pending {
            background: var(--apple-orange);
            box-shadow: 0 0 0 2px rgba(255, 149, 0, 0.2);
            animation: pulse 2s infinite;
        }
        
        .command-text {
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 14px;
            color: var(--apple-black);
            background: var(--apple-gray-6);
            padding: 4px 8px;
            border-radius: var(--border-radius-small);
            flex: 1;
        }
        
        .command-timestamp {
            font-size: 12px;
            color: var(--apple-gray);
            font-weight: 500;
        }
        
        .command-actions {
            display: flex;
            gap: 8px;
        }
        
        .copy-button {
            padding: 6px 12px;
            background: var(--apple-blue);
            color: var(--apple-white);
            border: none;
            border-radius: var(--border-radius-small);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .copy-button:hover {
            background: var(--apple-indigo);
            transform: translateY(-1px);
        }
        
        .copy-button:active {
            transform: translateY(0);
        }
        
        .copy-button.copied {
            background: var(--apple-green);
        }
        
        .response-section {
            background: var(--apple-gray-6);
            padding: 16px 24px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .response-section.expanded {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .response-content {
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.5;
            color: var(--apple-black);
            background: var(--apple-white);
            padding: 16px;
            border-radius: var(--border-radius-small);
            border: 1px solid var(--apple-gray-5);
            white-space: pre-wrap;
            word-wrap: break-word;
            position: relative;
        }
        
        .response-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .response-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--apple-gray);
            font-family: inherit;
        }
        
        .syntax-highlight .keyword {
            color: var(--apple-blue);
            font-weight: 600;
        }
        
        .syntax-highlight .ip {
            color: var(--apple-purple);
            font-weight: 500;
        }
        
        .syntax-highlight .interface {
            color: var(--apple-green);
            font-weight: 500;
        }
        
        .syntax-highlight .comment {
            color: var(--apple-gray);
            font-style: italic;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .ollama-avatar { background: var(--ollama-color); }

        @media (max-width: 1024px) {
            .workflow-section {
                grid-template-columns: 1fr;
                gap: 24px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            header {
                margin: -16px -16px 24px -16px;
                padding: 40px 16px 32px;
            }
            
            header h1 {
                font-size: 2.5rem;
            }
            
            nav {
                padding: 6px;
                gap: 2px;
                top: 16px;
                margin-bottom: 24px;
            }
            
            nav a {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .automation-panel {
                padding: 24px;
            }
            
            .step-item {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Multi-API Chat</h1>
            <p>Automation Workflows</p>
        </header>
        <nav>
            <a href="index.html">Chat</a>
            <a href="dashboard.html">Dashboard</a>
            <a href="operations.html">Operations</a>
            <a href="automation.html" class="active">Automation</a>
            <a href="devices.html">Devices</a>
            <a href="settings.html">Settings</a>
        </nav>
        
        <div class="automation-layout">
            <div class="automation-panel">
                <div class="panel-header">
                    <div class="panel-icon">ü§ñ</div>
                    <h2>Cisco Router Automation</h2>
                </div>
                
                <div class="workflow-section">
                    <div class="workflow-selection">
                        <div class="selector-label">Select Router</div>
                        <select id="routerSelect" class="router-select">
                            <option value="">Choose a network device</option>
                            <option value="router1">CORE-RTR-01 (192.168.1.1)</option>
                            <option value="router2">EDGE-RTR-02 (192.168.1.2)</option>
                            <option value="router3">WAN-RTR-03 (192.168.1.3)</option>
                            <option value="router4">BACKUP-RTR-04 (192.168.1.4)</option>
                        </select>
                        
                        <div class="selector-label">Workflow Type</div>
                        <div class="workflow-card" onclick="selectWorkflow('push')">
                            <div class="workflow-icon">üì§</div>
                            <div class="workflow-title">Configuration Push</div>
                            <div class="workflow-description">Push configurations to routers using natural language</div>
                        </div>
                        <div class="workflow-card" onclick="selectWorkflow('retrieve')">
                            <div class="workflow-icon">üì•</div>
                            <div class="workflow-title">Configuration Retrieval</div>
                            <div class="workflow-description">Retrieve and validate router configurations using natural language</div>
                        </div>
                    </div>
                    
                    <div class="steps-panel">
                        <div class="steps-title">Workflow Steps</div>
                    <div class="workflow-steps" id="workflowSteps">
                            <!-- Progressive Disclosure Step 1 -->
                            <div class="progressive-disclosure" id="step-1">
                                <div class="pd-summary" tabindex="0" role="button" aria-expanded="false">
                                    <div class="pd-level-indicator"></div>
                                    <div class="pd-summary-header">
                                        <div class="pd-summary-icon">üìù</div>
                                        <div class="pd-summary-content">
                                            <div class="pd-summary-title">Natural Language Request</div>
                                            <div class="pd-summary-description">Enter your configuration request in plain English</div>
                                        </div>
                                        <div class="pd-summary-status">
                                            <div class="pd-status-indicator info"></div>
                                            <div class="pd-expand-icon">‚ñº</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pd-details">
                                    <div class="pd-level-indicator"></div>
                                    <div class="pd-details-content">
                                        <div class="pd-details-section" data-section="input">
                                            <div class="pd-section-header">
                                                <div class="pd-section-title">
                                                    <span class="pd-section-icon">üí¨</span>
                                                    User Input Processing
                                                </div>
                                                <div class="pd-debug-toggle">
                                                    <span>Debug</span>
                                                    <span class="pd-debug-toggle-icon">‚ñº</span>
                                                </div>
                                            </div>
                                            <div class="pd-parameter-grid">
                                                <div class="pd-parameter-item">
                                                    <div class="pd-parameter-label">Input Type</div>
                                                    <div class="pd-parameter-value">Natural Language</div>
                                                </div>
                                                <div class="pd-parameter-item">
                                                    <div class="pd-parameter-label">Max Length</div>
                                                    <div class="pd-parameter-value">2048 chars</div>
                                                </div>
                                                <div class="pd-parameter-item">
                                                    <div class="pd-parameter-label">Language</div>
                                                    <div class="pd-parameter-value">English</div>
                                                </div>
                                                <div class="pd-parameter-item">
                                                    <div class="pd-parameter-label">Validation</div>
                                                    <div class="pd-parameter-value">Enabled</div>
                                                </div>
                                            </div>
                                            <div class="pd-command-block">
                                                <button class="pd-command-copy">Copy</button>
Example Input: "Configure OSPF with process ID 1 and area 0 on interface GigabitEthernet0/0/1 with router ID 1.1.1.1"
                                            </div>
                                            <div class="pd-debug">
                                                <div class="pd-debug-content">
                                                    <div class="pd-debug-header">
                                                        <span class="pd-debug-icon">üîç</span>
                                                        <span class="pd-debug-title">Debug Information</span>
                                                    </div>
                                                    <div class="pd-debug-section">
                                                        <div class="pd-debug-label">API Call</div>
                                                        <div class="pd-debug-value">POST /api/v1/nlp/parse
{
  "text": "Configure OSPF...",
  "timestamp": "2024-01-15T10:30:00Z",
  "user_id": "admin",
  "session_id": "sess_abc123"
}</div>
                                                    </div>
                                                    <div class="pd-debug-section">
                                                        <div class="pd-debug-label">Response Headers</div>
                                                        <div class="pd-debug-value">HTTP/1.1 200 OK
Content-Type: application/json
X-Request-ID: req_xyz789
X-Processing-Time: 45ms</div>
                                                    </div>
                                                    <div class="pd-debug-section">
                                                        <div class="pd-debug-label">Error Stack</div>
                                                        <div class="pd-debug-value">No errors detected
Validation: PASSED
Sanitization: PASSED</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <div class="step-title">AI Translation</div>
                                    <div class="step-description">Convert to Cisco IOS commands using GENAI</div>
                                    <div class="step-details">
                                        <div class="step-details-content">
                                            <div class="detail-section">
                                                <div class="detail-title">Command Input</div>
                                                <div class="detail-content">POST /api/genai/translate
{
  "text": "Configure OSPF...",
  "target": "cisco_ios",
  "model": "gpt-4"
}</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Expected Output</div>
                                                <div class="detail-content">interface GigabitEthernet0/0/1
 ip ospf 1 area 0
 no shutdown
!
router ospf 1
 router-id 1.1.1.1
 network 192.168.1.0 0.0.0.255 area 0
!</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Parameters</div>
                                                <div class="detail-content parameters">‚Ä¢ Model: GPT-4 or equivalent<br>‚Ä¢ Temperature: 0.1 (low randomness)<br>‚Ä¢ Max tokens: 1000<br>‚Ä¢ Context: Cisco IOS syntax rules</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Error Handling</div>
                                                <div class="detail-content parameters">‚Ä¢ API timeout: Retry with exponential backoff<br>‚Ä¢ Invalid response: Fallback to template-based generation<br>‚Ä¢ Rate limiting: Queue requests and inform user</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="step-status pending">Pending</div>
                                <div class="step-chevron" onclick="toggleStepDetails(1)">‚ñ∂</div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <div class="step-title">Syntax Validation</div>
                                    <div class="step-description">Validate generated configuration syntax</div>
                                    <div class="step-details">
                                        <div class="step-details-content">
                                            <div class="detail-section">
                                                <div class="detail-title">Command Input</div>
                                                <div class="detail-content">validate_ios_config()
# Parse configuration blocks
# Check command syntax
# Verify parameter ranges</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Expected Output</div>
                                                <div class="detail-content">{
  "valid": true,
  "warnings": [],
  "errors": [],
  "confidence": 0.95
}</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Parameters</div>
                                                <div class="detail-content parameters">‚Ä¢ Syntax parser: Custom Cisco IOS grammar<br>‚Ä¢ Validation rules: 500+ command patterns<br>‚Ä¢ Interface validation: Check interface existence<br>‚Ä¢ IP range validation: Subnet and mask checks</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Error Handling</div>
                                                <div class="detail-content parameters">‚Ä¢ Syntax error: Highlight problematic lines<br>‚Ä¢ Unknown command: Suggest alternatives<br>‚Ä¢ Validation failure: Return to AI translation step</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="step-status pending">Pending</div>
                                <div class="step-chevron" onclick="toggleStepDetails(2)">‚ñ∂</div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <div class="step-title">Router Execution</div>
                                    <div class="step-description">Apply configuration to selected router</div>
                                    <div class="step-details">
                                        <div class="step-details-content">
                                            <div class="detail-section">
                                                <div class="detail-title">Command Input</div>
                                                <div class="detail-content">telnet 192.168.1.1
# Authentication
enable
configure terminal
# Apply configuration commands
end
copy running-config startup-config</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Expected Output</div>
                                                <div class="detail-content">CORE-RTR-01#configure terminal
CORE-RTR-01(config)#interface GigabitEthernet0/0/1
CORE-RTR-01(config-if)#ip ospf 1 area 0
CORE-RTR-01(config-if)#end
CORE-RTR-01#</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Parameters</div>
                                                <div class="detail-content parameters">‚Ä¢ Connection: Telnet (preferred) or SSH<br>‚Ä¢ Timeout: 30 seconds per command<br>‚Ä¢ Authentication: Username/password or certificates<br>‚Ä¢ Backup: Auto-save running config</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Error Handling</div>
                                                <div class="detail-content parameters">‚Ä¢ Connection timeout: Retry connection<br>‚Ä¢ Authentication failure: Check credentials<br>‚Ä¢ Command error: Rollback and report<br>‚Ä¢ Network unreachable: Verify router status</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="step-status pending">Pending</div>
                                <div class="step-chevron" onclick="toggleStepDetails(3)">‚ñ∂</div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <div class="step-title">Verification</div>
                                    <div class="step-description">Confirm successful configuration deployment</div>
                                    <div class="step-details">
                                        <div class="step-details-content">
                                            <div class="detail-section">
                                                <div class="detail-title">Command Input</div>
                                                <div class="detail-content">show running-config | include ospf
show ip ospf interface
show ip ospf neighbor
show ip route ospf</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Expected Output</div>
                                                <div class="detail-content">GigabitEthernet0/0/1 is up, line protocol is up
  Internet Address 192.168.1.1/24, Area 0
  Process ID 1, Router ID 1.1.1.1
  Network Type BROADCAST, Cost: 1</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Parameters</div>
                                                <div class="detail-content parameters">‚Ä¢ Verification commands: Interface status, OSPF state<br>‚Ä¢ Health checks: Ping tests, route table verification<br>‚Ä¢ Performance: Response time measurement<br>‚Ä¢ Logging: Configuration change audit trail</div>
                                            </div>
                                            <div class="detail-section">
                                                <div class="detail-title">Error Handling</div>
                                                <div class="detail-content parameters">‚Ä¢ Verification timeout: Extended wait and retry<br>‚Ä¢ Config mismatch: Report discrepancies<br>‚Ä¢ OSPF not forming: Troubleshoot neighbor adjacency<br>‚Ä¢ Interface down: Check physical connectivity</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="step-status pending">Pending</div>
                                <div class="step-chevron" onclick="toggleStepDetails(4)">‚ñ∂</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="input-section">
                    <div class="input-label">Natural Language Configuration Request</div>
                    <textarea id="messageInput" class="natural-language-input" placeholder="Example: 'Configure OSPF with process ID 1 and area 0 on interface GigabitEthernet0/0/1 with router ID 1.1.1.1'"></textarea>
                    <button id="executeButton" class="execute-button">üöÄ Execute Automation Workflow</button>
                </div>
                
                <div class="output-section" id="configSection">
                    <div class="output-title">üìã Generated Configuration</div>
                    <div class="config-output" id="generatedConfig"></div>
                </div>
                
                <div class="output-section" id="resultsSection">
                    <div class="output-title">‚úÖ Execution Results</div>
                    <div class="results-output" id="pushResults"></div>
                    
                    <!-- Command History Section -->
                    <div class="command-history" id="commandHistory" style="display: none;">
                        <div class="history-header" onclick="toggleCommandHistory()">
                            <div class="history-title">
                                <span>üìú</span>
                                <span>Full Command History</span>
                                <span id="commandCount" class="command-timestamp">(0 commands)</span>
                            </div>
                            <div class="history-toggle" id="historyToggle">‚ñº</div>
                        </div>
                        <div class="history-content" id="historyContent">
                            <ul class="history-commands" id="historyCommands"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="progressive-disclosure.js"></script>
    <script>
        // Application state
        const state = {
            selectedRouter: null,
            selectedWorkflow: null,
            workflowSteps: document.querySelectorAll('.step-status'),
            commandHistory: [],
            currentExecution: null
        };

        // DOM Elements
        const elements = {
            routerSelect: document.getElementById('routerSelect'),
            messageInput: document.getElementById('messageInput'),
            executeButton: document.getElementById('executeButton'),
            workflowSteps: document.querySelectorAll('.step-status'),
            configSection: document.getElementById('configSection'),
            generatedConfig: document.getElementById('generatedConfig'),
            resultsSection: document.getElementById('resultsSection'),
            pushResults: document.getElementById('pushResults'),
            stepNumbers: document.querySelectorAll('.step-number'),
            stepItems: document.querySelectorAll('.step-item'),
            commandHistory: document.getElementById('commandHistory'),
            historyContent: document.getElementById('historyContent'),
            historyCommands: document.getElementById('historyCommands'),
            commandCount: document.getElementById('commandCount'),
            historyToggle: document.getElementById('historyToggle')
        };

        // Initialize the application
        async function init() {
            try {
                // Set up event listeners
                setupEventListeners();
            } catch (error) {
                console.error('Failed to initialize application:', error);
            }
        }

        // Set up event listeners
        function setupEventListeners() {
            // Router selection
            elements.routerSelect.addEventListener('change', (e) => {
                state.selectedRouter = e.target.value;
            });
            
            // Execute workflow
            elements.executeButton.addEventListener('click', executeWorkflow);
        }

        // Select workflow
        function selectWorkflow(workflow) {
            // Remove active class from all workflows
            document.querySelectorAll('.workflow-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add active class to selected workflow
            event.currentTarget.classList.add('selected');
            state.selectedWorkflow = workflow;
            
            // Reset workflow steps
            resetWorkflowSteps();
        }

        // Reset workflow steps
        function resetWorkflowSteps() {
            elements.workflowSteps.forEach(step => {
                step.textContent = 'Pending';
                step.className = 'step-status pending';
            });
            
            // Reset step numbers
            elements.stepNumbers.forEach(stepNumber => {
                stepNumber.className = 'step-number';
            });
            
            // Hide displays
            elements.configSection.style.display = 'none';
            elements.resultsSection.style.display = 'none';
            elements.commandHistory.style.display = 'none';
            
            // Clear command history for new execution
            state.commandHistory = [];
            state.currentExecution = {
                startTime: new Date(),
                commands: []
            };
            updateCommandHistoryDisplay();
        }

        // Execute workflow
        async function executeWorkflow() {
            if (!state.selectedRouter) {
                alert('Please select a router first');
                return;
            }
            
            if (!state.selectedWorkflow) {
                alert('Please select a workflow first');
                return;
            }
            
            const message = elements.messageInput.value.trim();
            if (!message) {
                alert('Please enter a natural language request');
                return;
            }
            
            // Reset workflow steps
            resetWorkflowSteps();
            
            if (state.selectedWorkflow === 'push') {
                await executePushWorkflow(message);
            } else if (state.selectedWorkflow === 'retrieve') {
                await executeRetrieveWorkflow(message);
            }
        }

        // Execute push workflow
        async function executePushWorkflow(message) {
            // Step 1: Enter natural language request
            updateStepStatus(0, 'completed');
            addCommandToHistory('Natural Language Input', message, new Date(), true, 'Request processed and parsed successfully');
            
            // Step 2: Translate to Cisco IOS commands
            updateStepStatus(1, 'in-progress');
            const iosConfig = await translateToIOS(message);
            updateStepStatus(1, 'completed');
            addCommandToHistory('AI Translation', 'Generate Cisco IOS configuration', new Date(), true, iosConfig);
            
            // Step 3: Validate Cisco IOS commands
            updateStepStatus(2, 'in-progress');
            const isValid = await validateIOSConfig(iosConfig);
            updateStepStatus(2, isValid ? 'completed' : 'failed');
            addCommandToHistory('Syntax Validation', 'validate_ios_config()', new Date(), isValid, 
                isValid ? 'Configuration syntax validated successfully' : 'Configuration validation failed');
            
            if (!isValid) {
                alert('Configuration validation failed. Please check the generated configuration.');
                elements.commandHistory.style.display = 'block';
                return;
            }
            
            // Display generated configuration
            elements.generatedConfig.textContent = iosConfig;
            elements.configSection.style.display = 'block';
            
            // Step 4: Push configuration to router
            updateStepStatus(3, 'in-progress');
            const pushResult = await pushConfigToRouter(iosConfig);
            updateStepStatus(3, pushResult.success ? 'completed' : 'failed');
            
            // Add detailed router commands to history
            const routerCommands = [
                'configure terminal',
                ...iosConfig.split('\n').filter(line => line.trim() && !line.trim().startsWith('!')),
                'end',
                'copy running-config startup-config'
            ];
            
            routerCommands.forEach((cmd, index) => {
                setTimeout(() => {
                    addCommandToHistory(
                        'Router Execution', 
                        cmd, 
                        new Date(), 
                        pushResult.success, 
                        pushResult.success ? `${state.selectedRouter}(config)# ${cmd}` : 'Command failed'
                    );
                }, index * 100);
            });
            
            // Step 5: Verify configuration push success
            updateStepStatus(4, pushResult.success ? 'completed' : 'failed');
            const verifyCommands = ['show running-config | include ospf', 'show ip ospf interface'];
            verifyCommands.forEach((cmd, index) => {
                setTimeout(() => {
                    addCommandToHistory(
                        'Verification', 
                        cmd, 
                        new Date(), 
                        pushResult.success, 
                        pushResult.success ? generateVerificationOutput(cmd) : 'Verification failed'
                    );
                }, (routerCommands.length + index) * 100 + 500);
            });
            
            // Display results
            elements.pushResults.textContent = pushResult.message;
            elements.resultsSection.style.display = 'block';
            elements.commandHistory.style.display = 'block';
        }

        // Execute retrieve workflow
        async function executeRetrieveWorkflow(message) {
            // Step 1: Enter natural language request
            updateStepStatus(0, 'completed');
            addCommandToHistory('Natural Language Input', message, new Date(), true, 'Request processed and parsed successfully');
            
            // Step 2: Translate to Cisco IOS commands
            updateStepStatus(1, 'in-progress');
            const iosCommand = await translateToIOSCommand(message);
            updateStepStatus(1, 'completed');
            addCommandToHistory('AI Translation', 'Generate Cisco IOS command', new Date(), true, iosCommand);
            
            // Step 3: Validate Cisco IOS commands
            updateStepStatus(2, 'in-progress');
            const isValid = await validateIOSCommand(iosCommand);
            updateStepStatus(2, isValid ? 'completed' : 'failed');
            addCommandToHistory('Command Validation', 'validate_ios_command()', new Date(), isValid, 
                isValid ? 'Command syntax validated successfully' : 'Command validation failed');
            
            if (!isValid) {
                alert('Command validation failed.');
                elements.commandHistory.style.display = 'block';
                return;
            }
            
            // Step 4: Execute command on router
            updateStepStatus(3, 'in-progress');
            const commandResult = await executeCommandOnRouter(iosCommand);
            updateStepStatus(3, commandResult.success ? 'completed' : 'failed');
            addCommandToHistory('Router Execution', iosCommand, new Date(), commandResult.success, commandResult.output || commandResult.message);
            
            // Step 5: Display retrieved results
            updateStepStatus(4, commandResult.success ? 'completed' : 'failed');
            
            // Display results
            elements.pushResults.textContent = commandResult.output || commandResult.message;
            elements.resultsSection.style.display = 'block';
            elements.commandHistory.style.display = 'block';
        }

        // Update step status
        function updateStepStatus(stepIndex, status) {
            const stepElement = elements.workflowSteps[stepIndex];
            if (!stepElement) return;
            
            stepElement.className = `step-status step-${status}`;
            stepElement.textContent = status.charAt(0).toUpperCase() + status.slice(1);
        }

        // Translate natural language to Cisco IOS configuration
        async function translateToIOS(message) {
            // Simulate translation
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // In a real implementation, this would call the GENAI backend
            // For this demo, we'll return a sample configuration
            return `!
! Sample configuration for: ${message}
interface GigabitEthernet0/0/1
description Auto-generated by GENAI
ip address dhcp
ip ospf 1 area 0
no shutdown
!
router ospf 1
router-id 1.1.1.1
!
end`;
        }

        // Translate natural language to Cisco IOS command
        async function translateToIOSCommand(message) {
            // Simulate translation
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // In a real implementation, this would call the GENAI backend
            // For this demo, we'll return a sample command
            return "show running-config";
        }

        // Validate Cisco IOS configuration
        async function validateIOSConfig(config) {
            // Simulate validation
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // In a real implementation, this would validate the configuration syntax
            // For this demo, we'll assume it's always valid
            return true;
        }

        // Validate Cisco IOS command
        async function validateIOSCommand(command) {
            // Simulate validation
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // In a real implementation, this would validate the command syntax
            // For this demo, we'll assume it's always valid
            return true;
        }

        // Push configuration to router
        async function pushConfigToRouter(config) {
            // Simulate pushing configuration
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // In a real implementation, this would connect to the actual router
            // and push the configuration
            return {
                success: true,
                message: "Configuration successfully pushed to router.\n\n" + 
                         "Interface GigabitEthernet0/0/1 configured with OSPF\n" +
                         "OSPF process 1 started with area 0\n" +
                         "Router ID set to 1.1.1.1\n" +
                         "Configuration applied without errors."
            };
        }

        // Execute command on router
        async function executeCommandOnRouter(command) {
            // Simulate executing command
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // In a real implementation, this would connect to the actual router
            // and execute the command, returning the output
            return {
                success: true,
                output: "Building configuration...\n\n" +
                        "Current configuration : 3456 bytes\n" +
                        "!\n" +
                        "version 15.4\n" +
                        "service timestamps debug datetime msec\n" +
                        "service timestamps log datetime msec\n" +
                        "!\n" +
                        "hostname CORE-RTR-01\n" +
                        "!\n" +
                        "interface GigabitEthernet0/0/1\n" +
                        " description GENAI Demo Interface\n" +
                        " ip address 192.168.1.1 255.255.255.0\n" +
                        " ip ospf 1 area 0\n" +
                        "!\n" +
                        "router ospf 1\n" +
                        " router-id 1.1.1.1\n" +
                        " network 192.168.1.0 0.0.0.255 area 0\n" +
                        "!\n" +
                        "end"
            };
        }

        // Toggle step details
        function toggleStepDetails(stepIndex) {
            const stepItem = document.querySelectorAll('.step-item')[stepIndex];
            const chevron = stepItem.querySelector('.step-chevron');
            const details = stepItem.querySelector('.step-details');
            
            // Toggle expanded state
            const isExpanded = details.classList.contains('expanded');
            
            if (isExpanded) {
                // Collapse
                chevron.classList.remove('expanded');
                chevron.textContent = '‚ñ∂';
                details.classList.remove('expanded');
                stepItem.classList.remove('expanded');
            } else {
                // Expand
                chevron.classList.add('expanded');
                chevron.textContent = '‚ñº';
                details.classList.add('expanded');
                stepItem.classList.add('expanded');
            }
        }
        
        // Command History Management
        function addCommandToHistory(stepName, command, timestamp, success, response) {
            const commandEntry = {
                id: Date.now() + Math.random(),
                stepName,
                command,
                timestamp,
                success,
                response,
                expanded: false
            };
            
            state.commandHistory.push(commandEntry);
            updateCommandHistoryDisplay();
        }
        
        function updateCommandHistoryDisplay() {
            const historyList = elements.historyCommands;
            historyList.innerHTML = '';
            
            elements.commandCount.textContent = `(${state.commandHistory.length} commands)`;
            
            state.commandHistory.forEach(entry => {
                const listItem = document.createElement('li');
                listItem.className = 'command-entry';
                listItem.innerHTML = `
                    <div class="command-header" onclick="toggleCommandResponse('${entry.id}')">
                        <div class="command-info">
                            <div class="command-status ${entry.success ? 'success' : 'error'}"></div>
                            <div class="command-text">${entry.command}</div>
                            <div class="command-timestamp">${formatTimestamp(entry.timestamp)} - ${entry.stepName}</div>
                        </div>
                        <div class="command-actions">
                            <button class="copy-button" onclick="copyToClipboard('${entry.command}', this); event.stopPropagation();">
                                üìã Copy Command
                            </button>
                            <button class="copy-button" onclick="copyToClipboard(\`${entry.response.replace(/`/g, '\\`')}\`, this); event.stopPropagation();">
                                üìÑ Copy Output
                            </button>
                        </div>
                    </div>
                    <div class="response-section ${entry.expanded ? 'expanded' : ''}" id="response-${entry.id}">
                        <div class="response-header">
                            <div class="response-title">Router Response:</div>
                        </div>
                        <div class="response-content syntax-highlight">${applySyntaxHighlighting(entry.response)}</div>
                    </div>
                `;
                historyList.appendChild(listItem);
            });
        }
        
        function toggleCommandHistory() {
            const content = elements.historyContent;
            const toggle = elements.historyToggle;
            const isExpanded = content.classList.contains('expanded');
            
            if (isExpanded) {
                content.classList.remove('expanded');
                toggle.classList.remove('expanded');
            } else {
                content.classList.add('expanded');
                toggle.classList.add('expanded');
            }
        }
        
        function toggleCommandResponse(entryId) {
            const responseSection = document.getElementById(`response-${entryId}`);
            const isExpanded = responseSection.classList.contains('expanded');
            
            if (isExpanded) {
                responseSection.classList.remove('expanded');
            } else {
                responseSection.classList.add('expanded');
            }
            
            // Update state
            const entry = state.commandHistory.find(cmd => cmd.id == entryId);
            if (entry) {
                entry.expanded = !entry.expanded;
            }
        }
        
        function formatTimestamp(timestamp) {
            return timestamp.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
        }
        
        function applySyntaxHighlighting(text) {
            if (!text) return '';
            
            return text
                .replace(/(interface|router|ip|show|configure|terminal|end|shutdown|no shutdown)/gi, '<span class="keyword">$1</span>')
                .replace(/\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\b/g, '<span class="ip">$1</span>')
                .replace(/\b(GigabitEthernet\d+\/\d+(?:\/\d+)?|FastEthernet\d+\/\d+(?:\/\d+)?|Loopback\d+)\b/gi, '<span class="interface">$1</span>')
                .replace(/^!.*$/gm, '<span class="comment">$&</span>')
                .replace(/\n/g, '\n');
        }
        
        async function copyToClipboard(text, button) {
            try {
                await navigator.clipboard.writeText(text);
                const originalText = button.textContent;
                button.textContent = '‚úÖ Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const originalText = button.textContent;
                button.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }
        }
        
        function generateVerificationOutput(command) {
            if (command.includes('show running-config')) {
                return `!
interface GigabitEthernet0/0/1
 description Auto-generated by GENAI
 ip ospf 1 area 0
 no shutdown
!
router ospf 1
 router-id 1.1.1.1
 network 192.168.1.0 0.0.0.255 area 0
!`;
            } else if (command.includes('show ip ospf interface')) {
                return `GigabitEthernet0/0/1 is up, line protocol is up 
  Internet Address 192.168.1.1/24, Area 0
  Process ID 1, Router ID 1.1.1.1, Network Type BROADCAST, Cost: 1
  Topology-MTID    Cost    Disabled    Shutdown      Topology Name
        0           1         no          no            Base
  Transmit Delay is 1 sec, State DR, Priority 1
  Designated Router (ID) 1.1.1.1, Interface address 192.168.1.1`;
            }
            return 'Verification completed successfully';
        }
        
        // Initialize application when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>